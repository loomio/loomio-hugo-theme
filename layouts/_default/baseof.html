<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
  <head>
    <title>{{ block "title" . }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    {{ .Hugo.Generator }}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {{ with .Description }} <meta name="description" content="{{ . }}"> {{ end }}
    {{ partial "favicon" . }}
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <link rel="canonical" href="{{ .Permalink }}">

    {{ $style := resources.Get "css/index.scss" | resources.ToCSS }}
    <link rel="stylesheet" href="{{ $style.Permalink }}">

    <!-- <link rel="stylesheet" type="text/css" href="/styles.css"> -->
    {{ partial "matomo.html" . }}
  </head>
  <body>
    <div class="multi-column">
      <aside class="multi-column__side">
        {{- block "left" . }}{{- end }}
      </aside>
      <div class="multi-column__main">
        {{ partial "site/header.html" . }}
        {{- block "main" . }}{{- end }}
      </div>
      <aside class="multi-column__side">
        {{- block "right" . }}{{- end }}
      </aside>
    </div>
    {{ partial "site/footer.html" . }}
  </body>
  <script>
    function getPageScroll() {
      if (self.pageYOffset) {
        return self.pageYOffset;
      } else if (document.documentElement && document.documentElement.scrollTop) {
        return document.documentElement.scrollTop;
      } else if (document.body) {// all other Explorers
        return document.body.scrollTop;
      }
    }

    tocPos = function() {
      scroll = getPageScroll();
      console.log(document.documentElement.scrollHeight, window.innerHeight);
      maxScroll = document.documentElement.scrollHeight - window.innerHeight - 400;
      if (scroll < 100) { return 0 };
      if (scroll > maxScroll) { return maxScroll };
      if (scroll > 150) { return scroll - 150 };
    }

    window.onscroll = function (e) {
      document.getElementById('toc').style.marginTop = tocPos()+"px";
    }
  </script>
</html>
